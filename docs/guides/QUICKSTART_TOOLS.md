# å·¥å…·è°ƒç”¨å¿«é€Ÿå…¥é—¨

## ğŸ¯ æ¦‚è¿°

å·¥å…·è°ƒç”¨åŠŸèƒ½å…è®¸AIæ¨¡å‹ä¸»åŠ¨è°ƒç”¨å¤–éƒ¨å·¥å…·æ¥è·å–ä¿¡æ¯ã€æ‰§è¡Œæ“ä½œï¼Œä»è€Œæä¾›æ›´å‡†ç¡®å’Œå®ç”¨çš„å›ç­”ã€‚

## ğŸ“ å·¥å…·APIå®šä¹‰ä½ç½®

### 1ï¸âƒ£ å†…ç½®å·¥å…· - åç«¯å®šä¹‰

**ä½ç½®**: `/mnt/zhizhu/mobile-agent/app.py` (ç¬¬299è¡Œå¼€å§‹)

```python
@register_builtin_tool('å·¥å…·å')
def tool_function(params):
    """å·¥å…·æè¿°"""
    return {'success': True, 'result': ç»“æœæ•°æ®}
```

**å½“å‰å†…ç½®å·¥å…·**:
- `get_current_time` - è·å–å½“å‰æ—¶é—´
- `calculate` - è®¡ç®—æ•°å­¦è¡¨è¾¾å¼  
- `search_web` - æœç´¢ç¤ºä¾‹

### 2ï¸âƒ£ å¤–éƒ¨APIå·¥å…· - å‰ç«¯æ³¨å†Œ

**æ³¨å†Œä½ç½®**: ç½‘é¡µ â†’ å·¥å…·ç®¡ç† â†’ æ·»åŠ å·¥å…· â†’ é€‰æ‹©"å¤–éƒ¨ API"

**éœ€è¦é…ç½®**:
- å·¥å…·åç§°
- å·¥å…·æè¿°ï¼ˆå‘Šè¯‰AIä»€ä¹ˆæ—¶å€™ç”¨ï¼‰
- API URL
- HTTPæ–¹æ³• (GET/POST)
- è¯·æ±‚å¤´ï¼ˆå¯é€‰ï¼‰
- å‚æ•°å®šä¹‰ (JSON Schema)

**ç¤ºä¾‹ - å¤©æ°”API**:
```json
{
  "name": "get_weather",
  "description": "æŸ¥è¯¢åŸå¸‚å¤©æ°”",
  "api_url": "https://api.weather.com/current",
  "api_method": "GET",
  "parameters": {
    "type": "object",
    "properties": {
      "city": {"type": "string", "description": "åŸå¸‚å"}
    },
    "required": ["city"]
  }
}
```

### 3ï¸âƒ£ è‡ªå®šä¹‰ä»£ç å·¥å…· - å‰ç«¯æ³¨å†Œ

**æ³¨å†Œä½ç½®**: ç½‘é¡µ â†’ å·¥å…·ç®¡ç† â†’ æ·»åŠ å·¥å…· â†’ é€‰æ‹©"è‡ªå®šä¹‰ä»£ç "

**ä»£ç è§„èŒƒ**:
- ä½¿ç”¨ `params` è·å–è¾“å…¥å‚æ•°
- å°†ç»“æœèµ‹å€¼ç»™ `result` å˜é‡

**ç¤ºä¾‹ - æ–‡æœ¬å¤„ç†**:
```python
text = params.get('text', '')
result = {
    'length': len(text),
    'uppercase': text.upper(),
    'words': len(text.split())
}
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: å¯åŠ¨æœåŠ¡

```bash
cd /mnt/zhizhu/mobile-agent
python app.py
```

### æ­¥éª¤2: æ³¨å†Œå·¥å…·

**æ–¹å¼A - ä½¿ç”¨å†…ç½®å·¥å…·**:
1. æ‰“å¼€ç½‘é¡µ â†’ å·¥å…·ç®¡ç†
2. ç‚¹å‡»"æ·»åŠ å·¥å…·"
3. é€‰æ‹©"å†…ç½®å·¥å…·"
4. ä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©å·¥å…·
5. ç‚¹å‡»ä¿å­˜

**æ–¹å¼B - åˆ›å»ºAPIå·¥å…·**:
1. å·¥å…·ç®¡ç† â†’ æ·»åŠ å·¥å…·
2. é€‰æ‹©"å¤–éƒ¨ API"
3. å¡«å†™é…ç½®ä¿¡æ¯
4. ç‚¹å‡»ä¿å­˜

**æ–¹å¼C - ç¼–å†™ä»£ç å·¥å…·**:
1. å·¥å…·ç®¡ç† â†’ æ·»åŠ å·¥å…·
2. é€‰æ‹©"è‡ªå®šä¹‰ä»£ç "
3. ç¼–å†™Pythonä»£ç 
4. å®šä¹‰å‚æ•°Schema
5. ç‚¹å‡»ä¿å­˜

### æ­¥éª¤3: åœ¨å¯¹è¯ä¸­ä½¿ç”¨

1. æ™ºèƒ½å¯¹è¯é¡µé¢
2. é€‰æ‹©æ”¯æŒå·¥å…·çš„æ¨¡å‹
3. **å‹¾é€‰è¦æ¿€æ´»çš„å·¥å…·** âš ï¸ é‡è¦ï¼
4. è®¾ç½®å‚æ•°
5. å‘é€æ¶ˆæ¯

AIä¼šè‡ªåŠ¨åˆ¤æ–­ä½•æ—¶éœ€è¦è°ƒç”¨å·¥å…·ï¼

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: è®¡ç®—å™¨

```
ç”¨æˆ·: å¸®æˆ‘ç®—ä¸€ä¸‹ 123 * 456 ç­‰äºå¤šå°‘

AI: (å†…éƒ¨è°ƒç”¨ calculate å·¥å…·)
    å‚æ•°: {"expression": "123 * 456"}
    ç»“æœ: 56088

AI: 123 ä¹˜ä»¥ 456 ç­‰äº 56088
```

### ç¤ºä¾‹2: æ—¶é—´æŸ¥è¯¢

```
ç”¨æˆ·: ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ

AI: (å†…éƒ¨è°ƒç”¨ get_current_time å·¥å…·)
    å‚æ•°: {"timezone": "Asia/Shanghai"}
    ç»“æœ: "2024-12-03 14:30:00"

AI: ç°åœ¨æ˜¯ 2024å¹´12æœˆ3æ—¥ 14:30
```

## ğŸ§ª æµ‹è¯•å·¥å…·

### å‘½ä»¤è¡Œæµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
cd /mnt/zhizhu/mobile-agent
python test_tools.py
```

### APIæµ‹è¯•

```bash
# æµ‹è¯•è®¡ç®—å™¨
curl -X POST http://localhost:5000/api/tools/execute \
  -H "Content-Type: application/json" \
  -d '{
    "tool_name": "calculate",
    "parameters": {"expression": "2+3*4"}
  }'

# å“åº”
{
  "success": true,
  "result": {"expression": "2+3*4", "value": 14}
}
```

## ğŸ“ JSON Schema é€ŸæŸ¥

```json
{
  "type": "object",
  "properties": {
    "å‚æ•°å": {
      "type": "ç±»å‹",        // string, number, boolean, array, object
      "description": "è¯´æ˜"  // å‘Šè¯‰AIè¿™ä¸ªå‚æ•°çš„ç”¨é€”
    }
  },
  "required": ["å¿…å¡«å‚æ•°"]
}
```

**ç±»å‹ç¤ºä¾‹**:
```json
{
  "string_param": {"type": "string"},
  "number_param": {"type": "number"},
  "bool_param": {"type": "boolean"},
  "array_param": {
    "type": "array",
    "items": {"type": "string"}
  },
  "enum_param": {
    "type": "string",
    "enum": ["é€‰é¡¹1", "é€‰é¡¹2", "é€‰é¡¹3"]
  }
}
```

## ğŸ”§ æ·»åŠ æ–°çš„å†…ç½®å·¥å…·

### ç¬¬1æ­¥: å®ç°å·¥å…·å‡½æ•°

ç¼–è¾‘ `app.py`ï¼Œåœ¨ç¬¬299è¡Œé™„è¿‘æ·»åŠ ï¼š

```python
@register_builtin_tool('your_tool_name')
def tool_your_function(params):
    """å·¥å…·åŠŸèƒ½æè¿°"""
    # è·å–å‚æ•°
    param1 = params.get('param1')
    
    # æ‰§è¡Œé€»è¾‘
    result_data = do_something(param1)
    
    # è¿”å›ç»“æœ
    return {
        'success': True,
        'result': result_data
    }
```

### ç¬¬2æ­¥: æ·»åŠ Schemaå®šä¹‰

åœ¨ `get_builtin_tools()` å‡½æ•°çš„ `builtin_schemas` å­—å…¸ä¸­æ·»åŠ ï¼š

```python
'your_tool_name': {
    'name': 'your_tool_name',
    'description': 'å·¥å…·çš„åŠŸèƒ½æè¿°',
    'parameters': {
        'type': 'object',
        'properties': {
            'param1': {
                'type': 'string',
                'description': 'å‚æ•°è¯´æ˜'
            }
        },
        'required': ['param1']
    }
}
```

### ç¬¬3æ­¥: é‡å¯æœåŠ¡

```bash
# Ctrl+C åœæ­¢
# é‡æ–°è¿è¡Œ
python app.py
```

## ğŸ“š è¿›é˜¶æ–‡æ¡£

- ğŸ“– **å®Œæ•´æ–‡æ¡£**: `TOOL_API.md`
- ğŸ§ª **æµ‹è¯•è„šæœ¬**: `test_tools.py`
- ğŸ“ **æ›´æ–°æ—¥å¿—**: `CHANGELOG.md` (v2.5)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å·¥å…·æ¿€æ´»**: å¯¹è¯å‰å¿…é¡»å‹¾é€‰è¦ä½¿ç”¨çš„å·¥å…·
2. **æ¨¡å‹æ”¯æŒ**: ç¡®ä¿æ¨¡å‹æ”¯æŒ Function Calling
3. **æ¸…æ™°æè¿°**: å·¥å…·æè¿°è¦æ¸…æ™°ï¼Œè®©AIçŸ¥é“ä½•æ—¶ä½¿ç”¨
4. **å‚æ•°éªŒè¯**: è‡ªå®šä¹‰å·¥å…·è¦å¤„ç†å¼‚å¸¸æƒ…å†µ
5. **å®‰å…¨æ€§**: ä»£ç å·¥å…·åœ¨æœåŠ¡å™¨æ‰§è¡Œï¼Œæ³¨æ„å®‰å…¨

## ğŸ› æ•…éšœæ’æŸ¥

**å·¥å…·æœªè¢«è°ƒç”¨**:
- âœ… ç¡®è®¤å·¥å…·å·²å‹¾é€‰æ¿€æ´»
- âœ… æ£€æŸ¥æ¨¡å‹æ˜¯å¦æ”¯æŒå·¥å…·è°ƒç”¨
- âœ… å·¥å…·æè¿°æ˜¯å¦æ¸…æ™°

**æ‰§è¡Œå¤±è´¥**:
- ğŸ“Š æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°
- ğŸ“‹ æŸ¥çœ‹æœåŠ¡å™¨ç»ˆç«¯æ—¥å¿—
- ğŸ” æµ‹è¯•å·¥å…·: `python test_tools.py`

**APIå·¥å…·å¤±è´¥**:
- ğŸŒ æ£€æŸ¥URLæ˜¯å¦æ­£ç¡®
- ğŸ”‘ éªŒè¯APIå¯†é’¥
- â±ï¸ æ£€æŸ¥ç½‘ç»œè¿æ¥

## ğŸ¤ è·å–å¸®åŠ©

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹ `TOOL_API.md` è¯¦ç»†æ–‡æ¡£
2. è¿è¡Œ `python test_tools.py` æµ‹è¯•
3. æ£€æŸ¥ `CHANGELOG.md` å·²çŸ¥é—®é¢˜

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

